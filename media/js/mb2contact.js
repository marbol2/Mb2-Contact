/**
 * @package		Mb2 Contact
 * @version		1.1.2
 * @author		Mariusz Boloz (http://mb2extensions.com)
 * @copyright	Copyright (C) 2016 Mariusz Boloz (http://mb2extensions.com). All rights reserved
 * @license		GNU/GPL (http://www.gnu.org/copyleft/gpl.html)
**/ 
jQuery(document).ready(function(a){function e(a){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/gim;return e.test(a.val())?!0:!1}a("#mb2contactform").submit(function(t){t.preventDefault();var m=a(this),r=m.data("modid"),o=m.attr("action")+"?option=com_ajax&module=mb2contact&method=sendEmail&modid="+r+"&format=raw",n=a(".mb2contactmessage"),s=a("#mb2contact-ajax-loading"),c=m.find("#mb2contact-formbtn"),f=!1,d=m.find("#mb2_name"),i=m.find("#mb2_email"),l=m.find("#mb2_subject"),b=m.find("#mb2_message"),v=m.find("#mb2_human"),p='<span class="mb2contact-form-message"></span>',g=m.parent().data("requiredmsg"),u=m.parent().data("emailvalidmsg");if(""==d.val()){d.addClass("mb2contact-form-field-error");var h=d.parent();h.find(".mb2contact-form-message")[0]?"":h.append(p);var C=h.find(".mb2contact-form-message");C.html(g),f=!0}else{d.removeClass("mb2contact-form-field-error");var h=d.parent(),C=h.find(".mb2contact-form-message");C.remove()}if(""==i.val()){i.addClass("mb2contact-form-field-error");var h=i.parent();h.find(".mb2contact-form-message")[0]?"":h.append(p);var y=h.find(".mb2contact-form-message");y.html(g),f=!0}else if(e(i)){i.removeClass("mb2contact-form-field-error");var h=i.parent(),y=h.find(".mb2contact-form-message");y.remove()}else{i.addClass("mb2contact-form-field-error");var h=i.parent();h.find(".mb2contact-form-message")[0]?"":h.append(p);var y=h.find(".mb2contact-form-message");y.html(u),f=!0}if(""==l.val()){l.addClass("mb2contact-form-field-error");var h=l.parent();h.find(".mb2contact-form-message")[0]?"":h.append(p);var _=h.find(".mb2contact-form-message");_.html(g),f=!0}else{l.removeClass("mb2contact-form-field-error");var h=l.parent(),_=h.find(".mb2contact-form-message");_.remove()}if(""==b.val()){b.addClass("mb2contact-form-field-error");var h=b.parent();h.find(".mb2contact-form-message")[0]?"":h.append(p);var j=h.find(".mb2contact-form-message");j.html(g),f=!0}else{b.removeClass("mb2contact-form-field-error");var h=b.parent(),j=h.find(".mb2contact-form-message");j.remove()}if(""==v.val()){v.addClass("mb2contact-form-field-error");var h=v.parent();h.find(".mb2contact-form-message")[0]?"":h.append(p);var x=h.find(".mb2contact-form-message");x.html(g),f=!0}else{v.removeClass("mb2contact-form-field-error");var h=v.parent(),x=h.find(".mb2contact-form-message");x.remove()}if(1==f)return!1;n.html(""),s.show(),c[0].disabled=!0,c.css({opacity:.3});var w=new FormData(a(this)[0]);a.ajax({url:o,type:"POST",data:w,cache:!1,contentType:!1,processData:!1,success:function(e){s.hide(),c.css({opacity:1}),c[0].disabled=!1,n.html(e);var t=a(".mb2contact-mtype").data("type");"success"===t&&(m.find('input[type="text"]').val(""),m.find('input[type="email"]').val(""),m.find("textarea").val(""))}})})});